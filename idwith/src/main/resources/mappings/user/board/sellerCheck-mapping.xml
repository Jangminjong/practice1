<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="SellerCheckDAO">
 	<resultMap type="userSellerVO" id="sellerCheckResult">
 		<result property="seller_code" column="seller_code"/>
 		<result property="seller_name" column="seller_name"/>
 		<result property="seller_sellno" column="seller_sellno"/>
 		<result property="seller_sellno_img" column="seller_sellno_img" typeHandler="org.apache.ibatis.type.ArrayTypeHandler"/>
 		<result property="user_id" column="user_id"/>
 		<result property="seller_profile" column="seller_profile"/>
 		<result property="seller_profile_img" column="seller_profile_img" typeHandler="org.apache.ibatis.type.ArrayTypeHandler"/>
 		<result property="seller_done" column="seller_done"/>
 		<result property="seller_goods_yn" column="seller_goods_yn"/>
 		<result property="seller_class_yn" column="seller_class_yn"/>
 		<result property="seller_status" column="seller_status"/>
 	</resultMap>
 	
 	<resultMap type="sellerClassVO" id="sellerClassResult">
 		<result property="seller_code" column="seller_code"/>
 	</resultMap>
 	
 	<resultMap type="sellerStoryVO" id="sellerStoryResult">
 		<result property="story_tseq" column="story_tseq" />
 		<result property="seller_id" column="seller_id" />
 		<result property="story_date" column="story_date" />
 		<result property="story_title" column="story_title" />
 		<result property="story_context" column="story_context" />
 		<result property="story_image" column="story_image" typeHandler="org.apache.ibatis.type.ArrayTypeHandler"/>
 		<result property="seller_name" column="seller_name" />
 		<result property="story_cnt" column="story_cnt" />
 	</resultMap>
 	
 	<resultMap type="sellerProductReviewVO" id="sellerProductReviewListResult">
 		<result property="goods_review_seq" column="goods_review_seq" />
 		<result property="goods_review_id" column="goods_review_id" />
 		<result property="goods_review_code" column="goods_review_code" />
 		<result property="goods_review_date" column="goods_review_date" />
 		<result property="goods_review_point" column="goods_review_point" />
 		<result property="goods_review_image" column="goods_review_image" typeHandler="org.apache.ibatis.type.ArrayTypeHandler"/>
 		<result property="goods_review_option1" column="goods_review_option1" />
 		<result property="goods_review_option2" column="goods_review_option2" />
 		<result property="goods_review_option3" column="goods_review_option3" />
 		<result property="goods_review_context" column="goods_review_context" />
 	</resultMap>
 	
 	<!-- 로그인 시 작가인지 판별 -->
 	<select id="sellerCheck" resultType="_long">
 		select seller_code from seller where user_id=#{user_id}
 	</select>
 	
 	<!-- 인기작가 리스트 -->
 	<select id="getSellerList" resultType="userSellerVO" resultMap="sellerCheckResult">
 		select * from seller <!-- 팔로워 순으로 가져오기 추가 -->
 	</select>
 	
 	<!-- 작가 정보 가져오기 -->
 	<select id="getSellerInfo" resultType="userSellerVO">
 		select * from seller where seller_code=${seller_code}
 	</select>
 	
 	<!-- 클래스 작가 여부 체크 -->
 	<select id="getClassCheck" resultType="_boolean">
 		select seller_class_yn from seller where seller_code=${seller_code}
 	</select>
 	
 	<!-- 작가가 등록한 클래스리스트 가져오기 -->
 	<select id="getClassList" resultType="sellerClassVO" resultMap="sellerClassResult">
 		select * from class_reg where seller_code=#{seller_code}
 	</select>
 	
 	<!-- 작가가 작성한 스토리 가져오기 -->
 	<select id="getSellerStory" resultType="sellerStoryVO" resultMap="sellerStoryResult">
 		select * from story where seller_id=#{seller_id}
 	</select>
 	
 	<!-- 작가의 등록한 상품에 대한 리뷰 -->
 	<select id="getSellerProductReviewList" resultType="sellerProductReviewVO" resultMap="sellerProductReviewListResult">
 		select * from goods_review where goods_review_code = (select goods_code from goods where seller_code=#{seller_code})
 	</select>
 	
 	<!-- 작가의 등록한 상품에 대한 리뷰 -->
 	<select id="countSellerGoods" resultType="_int">
 		select count(*) from goods where seller_code=#{seller_code}
 	</select>
</mapper>